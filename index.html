
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>📍 多地址城市匹配系统</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1200px; margin: auto; }
    #map { width: 100%; height: 500px; margin-top: 20px; }
    .address-block { margin-bottom: 10px; }
    #results, #logs { margin-top: 20px; white-space: pre-wrap; background: #f9f9f9; padding: 15px; border-radius: 8px; }
    @media screen and (max-width: 600px) {
      input[type="text"], input[type="number"] {
        width: 100% !important;
        box-sizing: border-box;
        margin-bottom: 8px;
      }
      .address-block {
        display: block;
      }
      button {
        margin-top: 10px;
        display: block;
        width: 100%;
      }
    }
  </style>
</head>
<body>

<h2>📍 多地址城市匹配系统</h2>

<div style="border:1px solid #ccc;padding:10px;border-radius:8px;margin-bottom:20px;">
  <label><input type="checkbox" class="api-check" value="amap" checked> 使用高德地图</label>
  <label><input type="checkbox" class="api-check" value="osm"> 使用OpenStreetMap</label>
  <label><input type="checkbox" class="api-check" value="tencent" checked> 使用腾讯位置服务</label>
  <label><input type="checkbox" class="api-check" value="geoapify" checked> 使用Geoapify</label><br>
  <label>高德 JS Key：<input type="text" id="amapJsKeyInput" placeholder="jsKey" value=""></label>
  <label>高德 Web Key：<input type="text" id="amapWebKeyInput" placeholder="webKey" value=""></label><br>
  <label>腾讯地图 Key：<input type="text" id="tencentKeyInput" placeholder="腾讯 Key"></label>
  <label>Geoapify Key：<input type="text" id="geoapifyKeyInput" placeholder="Geoapify Key"></label><br>
  <button onclick="clearSavedKeys()">🧹 清除已保存的 Key</button>
</div>

<div id="addresses">
  <div class="address-block">地址 1：<input type="text" class="addr-input" size="40"></div>
  <div class="address-block">地址 2：<input type="text" class="addr-input" size="40"></div>
</div>

<button onclick="addAddress()">➕ 添加地址（最多5个）</button><br><br>
阈值半径（米）：<input type="number" id="threshold" value="500">
<button id="matchBtn" onclick="checkMatch()" disabled>开始匹配</button>

<h3>🧪 匹配过程日志</h3>
<div id="logs"></div>

<h3>✅ 匹配成功结果</h3>
<div id="results"></div>

<div id="map"></div>

<div style="margin-top: 30px; font-size: 14px; color: #333;">
  <h4>📘 使用说明：</h4>
  <ul>
    <li>在上方勾选你要使用的地图服务。</li>
    <li>如果服务需要 API Key，请到下方的申请地址申请并粘贴。</li>
    <li>你输入的 Key 和勾选会自动保存在本地浏览器，下次自动加载。</li>
    <li>推荐至少使用 2 个地图服务以获得更稳妥的匹配。</li>
  </ul>
</div>

<div style="margin-top: 30px; font-size: 14px; color: #666;">
  <h4>🌐 各地图服务 API 申请地址：</h4>
  <ul>
    <li>🔑 高德地图：<a href="https://lbs.amap.com/dev/" target="_blank">https://lbs.amap.com/dev/</a></li>
    <li>🔑 腾讯位置服务：<a href="https://lbs.qq.com/dev" target="_blank">https://lbs.qq.com/dev</a></li>
    <li>🔑 Geoapify：<a href="https://www.geoapify.com/get-started-with-maps-api" target="_blank">https://www.geoapify.com</a></li>
    <li>🔑 OpenStreetMap (Nominatim)：<a href="https://nominatim.org/release-docs/latest/api/Search/" target="_blank">https://nominatim.org</a></li>
  </ul>
</div>

<div id="deploy-info" style="margin-top:30px; text-align:center; font-size:13px; color:#888;">
  🚀 当前版本：v1.1.0 ｜ 🌐 页面部署时间：<span id="deploy-time">加载中...</span>
</div>

<script src="main.js"></script>
</body>
</html>
